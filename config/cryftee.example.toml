# config/cryfttee.example.toml
#
# Example configuration file for CryftTEE. Operators can copy this to
# /etc/cryfttee/cryfttee.toml or similar and override via env vars.

[core]
# Human-readable name for this CryftTEE instance (for logs & UI).
instance_name = "cryfttee-01"

# Semantic version enforced by this build (should match CRYFTTEE_VERSION in code).
cryfttee_version = "0.4.0"

# Where to look for modules and global manifest.json.
module_dir      = "modules"
manifest_path   = "modules/manifest.json"

# Where to find trusted publishers and attestation configuration.
trust_config    = "config/trust.toml"

[api]
# Transport for /v1 APIs used by cryftgo:
#   "uds"   = Unix Domain Socket (default)
#   "https" = HTTP over TLS
transport   = "uds"

# UDS path used when transport = "uds".
uds_path    = "/tmp/cryfttee.sock"

# Bind address for HTTPS and kiosk UI (if HTTPS is enabled for API).
http_addr   = "0.0.0.0:8443"

# Optional base path for the versioned API (default: "/v1").
base_path   = "/v1"

[tls]
# Paths to TLS cert and key for HTTPS mode. Ignored when transport = "uds".
cert_path = "config/cryfttee.cert.pem"
key_path  = "config/cryfttee.key.pem"

[ui]
# Kiosk UI listen address (port 3232 by default).
addr = "0.0.0.0:3232"

# Static asset root for the kiosk (index.html, app.js, styles.css).
static_dir = "ui"

[schema]
# Whether to expose /v1/schema/modules for module authors and tooling.
enabled = true

[logging]
# "info", "debug", "trace", "warn", "error"
level = "info"

# Optional structured log output.
json  = false

[web3signer]
# Web3Signer URL for BLS and TLS key operations.
# This is where cryfttee connects to sign staking messages.
# Deploy with: ./scripts/deploy-keyvault.sh --web3signer-only
url = "http://localhost:9000"

# Fallback URLs to try if primary is unreachable (in order)
# Useful for high-availability setups or remote signers
fallback-urls = [
    # "http://web3signer.internal:9000",
    # "https://signer.cryft.network:9443"
]

# Request timeout in seconds
timeout = 30

# Health check interval in seconds (for UI status updates)
health_check_interval = 10
